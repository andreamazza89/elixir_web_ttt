<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <title>Elixir TicTacToe</title>
    <link rel="stylesheet" type="text/css" href="/public/style-game.css">
  </head>

  <body>

    <div id="board">
      <%= for row <- rows do %>
        <div class="row">
          <%= for cell <- row do %>
            <div class="cell">
              <% cell_presenter = TicTacToe.Web.CellPresenter %>
              <%= if (winner || draw) || not(cell_presenter.is_empty?(cell)) do %>
                <div class="cell-mark">
                  <%= cell_presenter.mark(cell) %>
                </div>
              <%= else %>
                <form action="/tictactoe/moves/<%= cell_presenter.index(cell) %>" method="post">
                  <button type="submit">
                </form>
              <% end %>
            </div>
          <% end %>
        </div>
      <% end %>
    </div>


    <div id="game-result">
      <%= cond do %>
      <%= winner -> %>
        <h1><%= winner.mark %> has won!</h1>
      <%= draw -> %>
        <h1>It was a draw!</h1>
      <%= true ->%>
        <h1>It is <%= current_player.mark %>'s turn, please pick a move</h1>
      <% end %>
    </div>

  </body>

</html>
